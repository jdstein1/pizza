<article>
  <!-- <div ng-include="'common/subnav.html'"></div> -->
  <h2>Toppings</h2>
  <ul class="sorting">
    <li>sort by:</li>
    <li class="icon" 
      ng-class="{'arrow':predicate==='seoname','up':reverse===false,'down':reverse===true}">
      <a class="btn" ng-click="fSorting('seoname')">name</a>
    </li>
    <li class="icon" 
      ng-class="{'arrow':predicate==='price','up':reverse===false,'down':reverse===true}">
      <a class="btn" ng-click="fSorting('price')">price</a>
    </li>
    <li class="icon" 
      ng-class="{'arrow':predicate==='type','up':reverse===false,'down':reverse===true}">
      <a class="btn" ng-click="fSorting('type')">type</a>
    </li>
  </ul>
  <form action="" id="myPizzaForm">
    <table style="">
      <thead>
        <tr>
          <th style="width:50%;">Ingredient Name</th>
          <th class="topping-left" style="width:10%;">Left <a href="" ng-click="fClear('left')">clear</a></th>
          <th class="topping-right" style="width:10%;">Right <a href="" ng-click="fClear('right')">clear</a></th>
          <th class="" style="width:10%;">Price Per Side</th>
          <th colspan="2" style="width:20%;">Charge</th>
        </tr>
      </thead>
      <tbody>
        <tr 
          class="{{topping.type}}" 
          ng-repeat="topping in toppings | orderBy:predicate:reverse" 
          ng-class="{'default':topping.base}"
        >
          <th class="align left">
            <label for="{{topping.seoname}}">
            <!-- <small class="float right">{{fToppingCharge(topping,'full')}}</small> -->
              <s class="light">{{$index}}</s>
              <span>{{topping.name}}</span>
              <i class="light" ng-show="topping.base">(default)</i>
              <i class="light">{{topping.id}}</i>
              <!-- TODO: Add mechanism to "favorite" a topping -->
              <!-- <span>fav</span> -->
                <!-- ng-model="myPizza.toppings[topping.seoname]"  -->
              <!-- <input type="checkbox" name="toppings" 
                ng-model="topping.checked" 
                ng-checked="topping.checked" 
                id="{{topping.seoname}}"> -->
            </label>
          </th>
          <!-- LEFT -->
          <td class="topping-left">
            <label for="ToppingsLeft{{topping.id}}">
              <!-- <span class="price">{{fToppingPrice(topping)}}</span> -->
                <!-- ng-model="myPizzaForm.toppings[$index].left"  -->
              <input type="checkbox" 
                name="Topping{{topping.id}}" 
                id="ToppingsLeft{{topping.id}}" 
                ng-model="myPizzaForm.toppings[topping.id].left" 
                ng-click="fToppingToggle('left',topping)"
                ng-checked="topping.layout.left">
            </label>
          </td>
          <!-- RIGHT -->
          <td class="topping-right">
            <label for="ToppingsRight{{topping.id}}">
              <!-- <span class="price">{{fToppingPrice(topping)}}</span> -->
                <!-- ng-model="myPizzaForm.toppings[$index].right"  -->
              <input type="checkbox" 
                name="Topping{{topping.id}}" 
                id="ToppingsRight{{topping.id}}" 
                ng-model="myPizzaForm.toppings[topping.id].right" 
                ng-click="fToppingToggle('right',topping)"
                ng-checked="topping.layout.right">
            </label>
          </td>
          <!-- PRICE PER SIDE -->
          <td class="">
            <span class="price">{{fToppingPrice(topping)}}</span>
          </td>
          <td colspan="2">
            <span>{{fToppingCharge(topping)}}</span>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <th>Separate Subtotals</th>
          <td>{{subtotal.left|currency}}</td>
          <td>{{subtotal.right|currency}}</td>
          <th>Split Subtotals</th>
          <td>{{subtotal.left+(subtotal.both/2)|currency}}</td>
          <td>{{subtotal.right+(subtotal.both/2)|currency}}</td>
        </tr>
        <tr>
          <th>Both Subtotal</th>
          <th colspan="2">{{subtotal.both|currency}}</th>
          <th>Whole Subtotal</th>
          <th colspan="2">{{subtotal.left+subtotal.right+subtotal.both|currency}}</th>
        </tr>
      </tfoot>
    </table>
    <hr>
    <!-- <div ng-include="'common/incl/incl-sizes.html'"></div> -->
    <!-- <div ng-include="'common/incl/incl-total.html'"></div> -->
    <!-- <hr> -->
    <!-- <table style="table-layout: fixed;">
      <tr>
        <th>myPizzaForm</th>
        <th>myPizza</th>
        <th>myPizza.size</th>
        <th>myPizza.toppings</th>
      </tr>
      <tr>
        <td><pre>{{myPizzaForm|json}}</pre></td>
        <td><pre>{{myPizza|json}}</pre></td>
        <td><pre>{{myPizza.size|json}}</pre></td>
        <td><pre>{{myPizza.toppings|json}}</pre></td>
      </tr>
    </table> -->
    <!-- <hr> -->
    <!-- <h3>myPizza.toppings</h3> -->
    <!-- <table style="table-layout: fixed;">
      <tr ng-repeat="item in myPizza.toppings">
        <th>{{item.name}}</th>
        <td>seo: {{item.seoname}}</td>
        <td>id: {{item.id}}</td>
        <td>price: {{fToppingPrice(item)}}</td>
        <td>layout: <pre>{{item.layout|json}}</pre></td>
        <td>charge: {{fToppingCharge(item)}}</td>
      </tr>
    </table> -->
    <!-- <hr> -->
    <!-- <table>
      <tr>
        <th>name</th>
        <th>seoname</th>
        <th>type</th>
        <th>id</th>
        <th>price</th>
        <th>layout</th>
        <th>charge</th>
      </tr>
      <tr ng-repeat="item in toppings">
        <th>{{item.name}}</th>
        <td>{{item.seoname}}</td>
        <td>{{item.type}}</td>
        <td>{{item.id}}</td>
        <td>{{fToppingPrice(item)}}</td>
        <td><pre>{{item.layout|json}}</pre></td>
        <td>{{fToppingCharge(item)}}</td>
      </tr>
      <tr>
        <th colspan="6">total left</th>
        <td>{{myPizza.totals.toppings.sum.left|currency}}</td>
      </tr>
      <tr>
        <th colspan="6">total right</th>
        <td>{{myPizza.totals.toppings.sum.right|currency}}</td>
      </tr>
      <tr>
        <th colspan="6">total whole</th>
        <td>{{myPizza.totals.toppings.sum.whole|currency}}</td>
      </tr>
    </table> -->
  </form>
</article>
